{"version":3,"sources":["./src/app/home/home.page.html","./src/app/home/home.module.ts","./src/app/home/home.page.scss","./src/app/home/home.page.ts"],"names":[],"mappings":"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","file":"home-home-module-es5.js","sourcesContent":["module.exports = \"<ion-content view-title=\\\"Treggo APP\\\" class=\\\"login-pane\\\">\\n\\n    <div style=\\\"margin-top: 10vh;\\\" class=\\\"flex-container-vertical\\\">\\n        <img class=\\\"img-head\\\" src=\\\"assets/images/Treggo-header.png\\\" />\\n        <br>\\n        <img src=\\\"assets/images/header-2.png\\\" />\\n\\n        <div class=\\\"flex-container-vertical box-size\\\">\\n\\n            <form [@Animation1] *ngIf=\\\"!otpDisplayed\\\" class=\\\"flex-container-vertical\\\" [formGroup]=\\\"loginForm\\\">\\n\\n                <ion-item class=\\\"form-styling\\\">\\n                    <ion-label position=\\\"floating\\\">Full Name</ion-label>\\n                    <ion-input type=\\\"text\\\" formControlName=\\\"name\\\"></ion-input>\\n                </ion-item>\\n                <br>\\n                <ion-item class=\\\"form-styling\\\">\\n                    <ion-label position=\\\"floating\\\">Phone Number</ion-label>\\n                    <ion-input type=\\\"number\\\" onKeyPress=\\\"if(this.value.length==10) return false;\\\" formControlName=\\\"phone\\\"></ion-input>\\n                </ion-item>\\n                <br>\\n                <ion-button class=\\\"btn-standard\\\" type=\\\"submit\\\" color=\\\"primary\\\" expand=\\\"block\\\" (click)=\\\"enterOTP()\\\">Send OTP\\n                </ion-button>\\n            </form>\\n\\n\\n            <!-- OTP FORM -->\\n            <form [@Animation1] *ngIf=\\\"otpDisplayed\\\" class=\\\"flex-container-vertical\\\" [formGroup]=\\\"otpForm\\\" (ngSubmit)=\\\"submitOTP()\\\">\\n\\n                <ion-item class=\\\"form-styling\\\">\\n                    <ion-label position=\\\"floating\\\">ENTER OTP</ion-label>\\n                    <ion-input onKeyPress=\\\"if(this.value.length==6) return false;\\\" id=\\\"partitioned\\\" type=\\\"number\\\" formControlName=\\\"otp\\\"></ion-input>\\n                </ion-item>\\n                <br>\\n                <ion-button size=\\\"large\\\" class=\\\"btn-standard\\\" type=\\\"submit\\\" color=\\\"primary\\\" expand=\\\"block\\\">VALIDATE\\n                </ion-button>\\n\\n                <br>\\n                <a (click)=\\\"switchToPhone()\\\" style=\\\"text-decoration: underline; cursor: pointer; color: white;\\\"> Resend? </a>\\n            </form>\\n        </div>\\n    </div>\\n\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\nimport { HomePage } from './home.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: HomePage\n      }\n    ])\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","module.exports = \".login-pane {\\n  --background: none;\\n  background: url('bg.png') no-repeat center center fixed;\\n  background-size: cover;\\n}\\n\\n.img-head {\\n  width: 60vw;\\n}\\n\\n.box-size {\\n  margin-top: 15vh;\\n  width: 90vw;\\n  height: 280px;\\n  background: rgba(255, 255, 255, 0.2);\\n  border-radius: 5%;\\n}\\n\\n.form-styling {\\n  --background: none;\\n  width: 90vw;\\n  height: 60px;\\n}\\n\\n#partitioned {\\n  letter-spacing: 10vw;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaG9tZS9EOlxcUHJvamVjdHNcXFRyZWdnby1hcHAvc3JjXFxhcHBcXGhvbWVcXGhvbWUucGFnZS5zY3NzIiwic3JjL2FwcC9ob21lL2hvbWUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQUE7RUFDQSx1REFBQTtFQUdBLHNCQUFBO0FDQ0o7O0FERUE7RUFDSSxXQUFBO0FDQ0o7O0FERUE7RUFDSSxnQkFBQTtFQUNBLFdBQUE7RUFDQSxhQUFBO0VBQ0Esb0NBQUE7RUFDQSxpQkFBQTtBQ0NKOztBREVBO0VBQ0ksa0JBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtBQ0NKOztBREVBO0VBQ0ksb0JBQUE7QUNDSiIsImZpbGUiOiJzcmMvYXBwL2hvbWUvaG9tZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubG9naW4tcGFuZSB7XG4gICAgLS1iYWNrZ3JvdW5kOiBub25lO1xuICAgIGJhY2tncm91bmQ6IHVybCgnLi4vLi4vYXNzZXRzL2ltYWdlcy9iZy5wbmcnKSBuby1yZXBlYXQgY2VudGVyIGNlbnRlciBmaXhlZDtcbiAgICAtd2Via2l0LWJhY2tncm91bmQtc2l6ZTogY292ZXI7XG4gICAgLW1vei1iYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xuICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XG59XG5cbi5pbWctaGVhZCB7XG4gICAgd2lkdGg6IDYwdnc7XG59XG5cbi5ib3gtc2l6ZSB7XG4gICAgbWFyZ2luLXRvcDogMTV2aDtcbiAgICB3aWR0aDogOTB2dztcbiAgICBoZWlnaHQ6IDI4MHB4O1xuICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTtcbiAgICBib3JkZXItcmFkaXVzOiA1JTtcbn1cblxuLmZvcm0tc3R5bGluZyB7XG4gICAgLS1iYWNrZ3JvdW5kOiBub25lO1xuICAgIHdpZHRoOiA5MHZ3O1xuICAgIGhlaWdodDogNjBweDtcbn1cblxuI3BhcnRpdGlvbmVkIHtcbiAgICBsZXR0ZXItc3BhY2luZzogMTB2dztcbn0iLCIubG9naW4tcGFuZSB7XG4gIC0tYmFja2dyb3VuZDogbm9uZTtcbiAgYmFja2dyb3VuZDogdXJsKFwiLi4vLi4vYXNzZXRzL2ltYWdlcy9iZy5wbmdcIikgbm8tcmVwZWF0IGNlbnRlciBjZW50ZXIgZml4ZWQ7XG4gIC13ZWJraXQtYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcbiAgLW1vei1iYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xuICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xufVxuXG4uaW1nLWhlYWQge1xuICB3aWR0aDogNjB2dztcbn1cblxuLmJveC1zaXplIHtcbiAgbWFyZ2luLXRvcDogMTV2aDtcbiAgd2lkdGg6IDkwdnc7XG4gIGhlaWdodDogMjgwcHg7XG4gIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTtcbiAgYm9yZGVyLXJhZGl1czogNSU7XG59XG5cbi5mb3JtLXN0eWxpbmcge1xuICAtLWJhY2tncm91bmQ6IG5vbmU7XG4gIHdpZHRoOiA5MHZ3O1xuICBoZWlnaHQ6IDYwcHg7XG59XG5cbiNwYXJ0aXRpb25lZCB7XG4gIGxldHRlci1zcGFjaW5nOiAxMHZ3O1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { LoadingController } from '@ionic/angular';\nimport { Dialogs } from '@ionic-native/dialogs/ngx';\nimport { trigger, transition, style, animate } from '@angular/animations';\nimport { Router } from '@angular/router';\nimport { RestService } from '../services/rest.service';\nimport { Storage } from '@ionic/storage';\n\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n  animations: [\n    trigger(\n      'Animation1',\n      [\n        transition(\n          ':enter',\n          [\n            style({ opacity: 0 }),\n            animate('0.5s linear',\n              style({ opacity: 1, }))\n          ]\n        )\n      ]\n    )\n  ]\n})\nexport class HomePage implements OnInit {\n\n  loginForm: FormGroup;\n  otpForm: FormGroup;\n  otpDisplayed: boolean = false;\n  user: any = null;\n\n  constructor(private formBuilder: FormBuilder,\n    private loading: LoadingController,\n    private dialogs: Dialogs,\n    private rest: RestService,\n    private storage: Storage,\n    private router: Router) { }\n\n  ngOnInit() {\n\n    this.loginForm = this.formBuilder.group({\n      name: ['', Validators.compose([Validators.required, Validators.minLength(3)])],\n      phone: ['', Validators.compose([Validators.required, Validators.minLength(10), Validators.pattern(/^[6-9]\\d{9}$/)])]\n    });\n\n    this.otpForm = this.formBuilder.group({\n      otp: ['', Validators.compose([Validators.required, Validators.maxLength(6), Validators.pattern(/^[0-9]\\d{6}$/)])]\n    });\n\n  }\n\n\n  enterOTP() {\n    this.otpForm.patchValue({\n      otp: ''\n    });\n\n    //Create new customer\n    this.loading.create({\n      message: 'Creating Customer',\n      spinner: 'dots',\n      showBackdrop: true,\n    }).then(loading => {\n\n      loading.present();\n\n      // let dto = {\n      //   customer_name: this.loginForm.value.name,\n      //   phone: this.loginForm.value.phone,\n      //   validated: 'N'\n      //   table_id: 3\n      // };\n\n      let dto = {\n        customer_name: \"Siddhant Gupta\",\n        phone: \"8999090358\",\n        validated: 'N',\n        table_id: 3   // For now we assume this table \n      };\n\n      this.rest.createNewCustomer(dto).subscribe((res: any) => {\n        this.otpDisplayed = true;\n        this.user = res;\n\n        loading.dismiss();\n      },\n        err => {\n          loading.dismiss();\n\n          this.dialogs.alert(\"Unable to register the customer on this device, please contact ADMIN\", \"ERROR\");\n        });\n    });\n\n\n  }\n\n  switchToPhone() {\n    this.otpForm.patchValue({\n      otp: ''\n    });\n\n    this.otpDisplayed = false;\n  }\n\n\n  submitOTP() {\n\n    this.loading.create({\n      message: 'Validating OTP',\n      spinner: 'dots',\n      showBackdrop: true,\n    }).then(loading => {\n\n      loading.present();\n\n      //Validate OTP:\n\n\n      //Activate Customer:\n      let dto = {\n        custId: this.user.customer_id,\n        status: true\n      };\n\n      this.rest.updateCustomerStatus(dto).subscribe((res: any) => {\n\n        loading.dismiss();\n        this.user.status = 'Y';\n        this.storage.set('user', this.user);\n        console.log(\"User storage --> \", this.user);\n\n        this.storage.set('order', null);\n        this.storage.set('placedOrder', null);\n        this.storage.set('dishes', null);\n\n        //Navigate to menu after validation:\n        this.router.navigate(['menu', 'dashboard']);\n        \n        \n\n      }, err => {\n        loading.dismiss();\n        this.storage.set('order', null);\n        this.dialogs.alert(\"Unable to activate the customer, please contact ADMIN\", \"ERROR\");\n      });\n\n    });\n\n\n  }\n\n\n}\n"],"sourceRoot":""}